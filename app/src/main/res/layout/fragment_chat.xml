<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
	xmlns:app="http://schemas.android.com/apk/res-auto"
	xmlns:tools="http://schemas.android.com/tools"
	android:layout_width="match_parent"
	android:layout_height="match_parent"
	tools:context=".ui.ChatFragment">

	<!-- Top App Bar -->
	<com.google.android.material.appbar.MaterialToolbar
		android:id="@+id/chat_toolbar"
		android:layout_width="0dp"
		android:layout_height="?attr/actionBarSize"
		android:elevation="@dimen/space_xs"
		app:layout_constraintEnd_toEndOf="parent"
		app:layout_constraintStart_toStartOf="parent"
		app:layout_constraintTop_toTopOf="parent"
		app:menu="@menu/chat_menu"
		app:navigationIcon="@drawable/ic_arrow_back"
		app:title="@string/app_name" />

	<!-- Connectivity indicator (over toolbar content) -->
	<View
		android:id="@+id/connection_indicator"
		android:layout_width="@dimen/node_state_indication_radius"
		android:layout_height="@dimen/node_state_indication_radius"
		android:layout_marginEnd="40dp"
		android:background="@drawable/status_indicator"
		android:elevation="@dimen/space_md"
		app:layout_constraintBottom_toBottomOf="@id/chat_toolbar"
		app:layout_constraintEnd_toEndOf="parent"
		app:layout_constraintTop_toTopOf="@id/chat_toolbar" />

	<!-- RecyclerView for chat messages -->
	<androidx.recyclerview.widget.RecyclerView
		android:id="@+id/chat_recycler_view"
		android:layout_width="match_parent"
		android:layout_height="0dp"
		android:clipToPadding="false"
		android:paddingTop="8dp"
		android:paddingBottom="0dp"
		app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
		app:layout_constraintBottom_toTopOf="@id/message_input_container"
		app:layout_constraintEnd_toEndOf="parent"
		app:layout_constraintStart_toStartOf="parent"
		app:layout_constraintTop_toBottomOf="@id/chat_toolbar"
		tools:listitem="@layout/item_message_sent" />

	<!-- Message input area -->
	<LinearLayout
		android:id="@+id/message_input_container"
		android:layout_width="match_parent"
		android:layout_height="wrap_content"
		android:baselineAligned="false"
		android:gravity="center_vertical"
		android:orientation="horizontal"
		android:padding="2dp"
		app:layout_constraintBottom_toBottomOf="parent"
		app:layout_constraintEnd_toEndOf="parent"
		app:layout_constraintStart_toStartOf="parent">

		<FrameLayout
			android:id="@+id/message_input_frame"
			android:layout_width="0dp"
			android:layout_height="wrap_content"
			android:layout_weight="1">

			<com.google.android.material.textfield.TextInputLayout
				style="@style/Widget.SATMesh.TextInputLayout.Message"
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				app:hintEnabled="false">

				<com.google.android.material.textfield.TextInputEditText
					android:id="@+id/message_edit_text"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:background="@null"
					android:gravity="top|start"
					android:hint="@string/message_hint"
					android:imeOptions="actionSend"
					android:inputType="textCapSentences|textMultiLine"
					android:maxLines="4"
					android:minLines="1"
					android:paddingVertical="10dp"
					android:paddingStart="12dp"
					android:paddingEnd="48dp"
					android:textColor="@color/on_secondary"
					android:textColorHint="@color/on_secondary" />
			</com.google.android.material.textfield.TextInputLayout>

			<ImageButton
				android:id="@+id/send_button"
				android:layout_width="36dp"
				android:layout_height="36dp"
				android:layout_gravity="end|center_vertical"
				android:background="@drawable/send_button_background"
				android:clickable="true"
				android:contentDescription="@string/send_message_description"
				android:focusable="true"
				android:padding="@dimen/space_xs"
				android:src="@drawable/ic_send"
				app:tint="@color/secondary" />
		</FrameLayout>
	</LinearLayout>
</androidx.constraintlayout.widget.ConstraintLayout>